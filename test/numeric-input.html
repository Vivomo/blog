<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>只可以输入数字的键盘</title>
</head>
<body>
    <input type="text" placeholder="只能输入数字" id="numeric" data-number-type="PositiveNumber">

    <script>
        let input = document.getElementById('numeric');

        let type = input.dataset.numberType;

        console.log(type);
        let reg = /^-?(0|[1-9][0-9]*)(\.[0-9]*)?$/;
        let listener;
        if (type === 'Integer') {
            let reg = /^-?(0|[1-9][0-9]*)([0-9]*)?$/;
            listener = (e) => {
                let target = e.target;
                let value = target.value;
                if (!isNaN(value) && reg.test(value) || value === '' || value === '-') {
                    target.tempValue = value;
                } else {
                    target.value = target.tempValue || '';
                }
            };
        } else if (type === 'PositiveNumber') {
            let reg = /^(0|[1-9][0-9]*)(\.[0-9]*)?$/;
            listener = (e) => {
                let target = e.target;
                let value = target.value;
                if (!isNaN(value) && reg.test(value) || value === '') {
                    target.tempValue = value;
                } else {
                    target.value = target.tempValue || '';
                }
            };
        } else if (type === 'NaturalNumber') {
            let reg = /^[1-9][0-9]*$/;
            listener = (e) => {
                let target = e.target;
                let value = target.value;
                if (!isNaN(value) && reg.test(value) || value === '') {
                    target.tempValue = value;
                } else {
                    target.value = target.tempValue || '';
                }
            };
        } else {
            let reg = /^-?(0|[1-9][0-9]*)(\.[0-9]*)?$/;
            listener = (e) => {
                let target = e.target;
                let value = target.value;
                if (!isNaN(value) && reg.test(value) || value === '' || value === '-') {
                    target.tempValue = value;
                } else {
                    target.value = target.tempValue || '';
                }
            };
        }


        input.addEventListener('input', listener)

    </script>
</body>
</html>
