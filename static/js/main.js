(this["webpackJsonpmy-kingdom"]=this["webpackJsonpmy-kingdom"]||[]).push([[0],[function(t,e){t.exports=React},function(t,e){t.exports=ReactDOM},function(t,e,n){t.exports=n(8)},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var a=n(0),o=n.n(a),r=n(1),c=n.n(r);function i(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function f(t){return(f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t,e){return!e||"object"!==f(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function d(t){return function(t){if(Array.isArray(t))return h(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"===typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n(3);var p=Symbol(),v={"surround-cat":{content:"icon-youxi"},"sort-3d":{content:"icon-D"},hanoi:{content:"icon-diejia"},"css-util":{content:"icon-util"},calendar:{content:"icon-rili"},"kill-pc":{content:"icon-duyao"},search:{content:"icon-soushuo"},"random-cuboid":{content:"icon-donghua"},ball:{content:"icon-donghua"},Gobang:{content:"icon-qi"},"solar-system":{content:"icon-taiyangxi",hover:{className:"rotate"}},canvasToImg:{content:"icon-yuanhu"},cube:{content:"icon-mofang"},"to-qr-code":{content:"icon-V"},minesweeper:{content:"icon-saoleix"},"blog-md-test":{content:"icon-note"},"variable-declaration-of-js":{content:"icon-note"},TaiChi:{content:"icon-taiji",hover:{className:"rotate"}},"number-of-js":{content:"icon-note"},"css-code-guide":{content:"icon-note"},"image-opt":{content:"icon-picture"},"layout-of-css":{content:"icon-note"},"word-count":{content:"icon-note"},scss:{content:"icon-note"},"high-performance-web-site":{content:"icon-note"},refactoring:{content:"icon-note"},"eight-queens":{content:""},"shoot-test":{content:"icon-sheji"},"three-door":{content:"icon-men"},"translate-program":{content:"icon-biji"},"css-remove-scroll-shake":{content:"icon-note"},tetris:{content:"icon-youxi"},"snake-auto":{content:"icon-youxi"},sudoku:{content:"icon-V"},"push-box":{content:"icon-V"},"bad-apple":{content:"icon-shipin"}};for(var b in v)void 0===v[b].type&&(v[b].type=p);var g=function(t){var e,n={marginLeft:t.marginLeft+"px",marginTop:t.marginTop+"px",width:t.width2D+"px",height:t.height2D+"px",fontSize:t.height+"px",color:t.color},a=(e=t.name,v[e]||{});return o.a.createElement("div",{style:n,className:"building ".concat(a.hover?a.hover.className:"")},o.a.createElement("div",{className:"wall front"},o.a.createElement("div",{className:"inner-box"},a.type?o.a.createElement("i",{className:"iconfont mark ".concat(a.content)}):null)),o.a.createElement("div",{className:"wall back"},o.a.createElement("div",{className:"inner-box"}," ")),o.a.createElement("div",{className:"wall up"},o.a.createElement("a",{href:t.href,target:"_blank",rel:"noopener noreferrer",className:"link inner-box"},t.title)),o.a.createElement("div",{className:"wall bottom"},o.a.createElement("div",{className:"inner-box"}," ")),o.a.createElement("div",{className:"wall left"},o.a.createElement("div",{className:"inner-box"}," ")),o.a.createElement("div",{className:"wall right"},o.a.createElement("div",{className:"inner-box"}," ")))};g.defaultProps={width2D:120,height2D:80,height:320,left:0,top:0,color:"#119b11"};var y=g,E=(n(4),function(t){var e={transform:"translate3d(".concat(t.translateX,"px, ").concat(t.translateY,"px, ").concat(t.translateZ,"px)\n         rotateX(").concat(t.rotateX,"deg) rotateY(0deg) rotateZ(").concat(t.rotateZ,"deg)")},n=Object(a.useRef)(null);return Object(a.useEffect)((function(){n.current.addEventListener("mousewheel",(function(t){t.ctrlKey&&t.preventDefault(),t.stopPropagation()}))}),[]),o.a.createElement("div",{className:"ground",style:e},o.a.createElement("ol",{className:"data-list",ref:n},d(t.buildings).reverse().map((function(t){return o.a.createElement("li",{key:t.name,className:"data-link-wrap"},o.a.createElement("a",{href:t.href,target:"_blank",rel:"noopener noreferrer",className:"data-link"},t.title))}))),o.a.createElement("div",{className:"building-wrap"},t.buildings.map((function(t){return o.a.createElement(y,Object.assign({key:t.name},t))}))))}),w=(n(5),function(t){return t/4}),X=function(t,e){var n=t,a=e-t;return void 0===e&&(n=0,a=t),~~(a*Math.random())+n},k=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(f,t);var e,n,a,r,c=(e=f,function(){var t,n=l(e);if(u()){var a=l(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return m(this,t)});function f(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),(e=c.call(this,t)).initCache=function(){var t=e.cache;t.rotating=!1,t.translational=!1,t.offsetX=0,t.offsetY=0,t.rotateDirection=null},e.rotate=function(t){e.updateOffset(t);var n=e.cache,a=n.offsetX,o=n.offsetY;null===n.rotateDirection?(Math.abs(a)>30||Math.abs(o)>30)&&(e.cache.rotateDirection=~~(Math.abs(o)>Math.abs(a)),e.updateRotateState()):e.updateRotateState()},e.updateOffset=function(t){e.cache.offsetX=e.cache.startX-t.pageX,e.cache.offsetY=e.cache.startY-t.pageY},e.translate=function(t){e.updateOffset(t);var n=e.cache,a=n.offsetX,o=n.offsetY,r=n.translateX,c=n.translateY;e.setState({translateX:r-a,translateY:c-o})},e.updateTransform=function(){console.log("update");setTimeout((function t(){e.setState({rotateX:e.state.rotateX-1},(function(){e.state.rotateX>45?requestAnimationFrame(t):e.initEventListener()}))}),1500)},e.state={translateX:0,translateY:0,translateZ:-1200,rotateX:180,rotateZ:0,buildings:[]},e.kMap=o.a.createRef(),e.cache={startX:0,startY:0,offsetX:0,offsetY:0,translateX:0,translateY:0,rotateX:45,rotateZ:0,rotating:!1,rotateDirection:null,translational:!1},e}return n=f,(a=[{key:"updateRotateState",value:function(){1===this.cache.rotateDirection?this.setState({rotateX:this.cache.rotateX+w(this.cache.offsetY)}):this.setState({rotateZ:this.cache.rotateZ+w(this.cache.offsetX)})}},{key:"initEventListener",value:function(){var t=this,e=this.kMap;e.current.addEventListener("mousedown",(function(n){t.cache.startX=n.pageX,t.cache.startY=n.pageY,e.current.addEventListener("mousemove",n.ctrlKey?t.rotate:t.translate)})),e.current.addEventListener("mouseup",(function(){var n=t.cache;null!==n.rotateDirection?(e.current.removeEventListener("mousemove",t.rotate),1===n.rotateDirection?n.rotateX+=w(n.offsetY):0===n.rotateDirection&&(n.rotateZ+=w(n.offsetX))):(e.current.removeEventListener("mousemove",t.translate),n.translateX-=n.offsetX,n.translateY-=n.offsetY),t.initCache()})),e.current.addEventListener("mousewheel",(function(e){e.ctrlKey&&e.preventDefault(),t.setState({translateZ:t.state.translateZ+(e.wheelDelta>0?80:-80)})}))}},{key:"initBuildings",value:function(){var t=/([a-z0-9-]+)\.html$/i,e=Array.from(document.querySelectorAll(".post-list li a")).map((function(e){return{title:e.innerText,href:e.href,name:t.exec(e.href)[1],width2D:X(120,170),height2D:X(80,120),height:X(320,420),marginLeft:X(20,100),marginTop:X(20,100),color:"rgb(".concat(X(50,255),", ").concat(X(50,255),", ").concat(X(50,255),")")}})).reverse();this.setState({buildings:e},this.updateTransform)}},{key:"componentDidMount",value:function(){this.initBuildings()}},{key:"render",value:function(){return o.a.createElement("div",{className:"k-map",ref:this.kMap},o.a.createElement(E,{translateX:this.state.translateX,translateY:this.state.translateY,translateZ:this.state.translateZ,rotateX:this.state.rotateX,rotateZ:this.state.rotateZ,buildings:this.state.buildings}))}}])&&i(n.prototype,a),r&&i(n,r),f}(o.a.Component);n(6);var x=function(){var t=Object(a.useRef)(null);return Object(a.useEffect)((function(){var e=document.getElementById("canvas-bg"),n=e.getContext("2d"),a=e.width=document.body.clientWidth,o=e.height=window.innerHeight,r=new Array(256).join("1").split("");!function t(){requestAnimationFrame(t),n.fillStyle="rgba(0,0,0,0.05)",n.fillRect(0,0,a,o),n.fillStyle="rgba(0,255,0,0.6)",r=r.map((function(t,e){var a=Math.random();return n.fillText(String.fromCharCode(Math.floor(2720+33*a)),10*e,t),(t+=10)>768+1e4*a?0:t}))}(),t.current.ondragstart=function(t){t.preventDefault()}}),[]),o.a.createElement("div",{className:"App",ref:t},o.a.createElement("canvas",{id:"canvas-bg"}),o.a.createElement(k,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(7);c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}],[[2,1]]]);