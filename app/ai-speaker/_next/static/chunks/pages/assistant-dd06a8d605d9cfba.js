(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[229],{9792:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/assistant",function(){return s(69)}])},69:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return assistant}});var n=s(1527),i=s(5583),a=s(8575),l=s(1239),r=s(4952),o=s(959),c=s(1103),u=s(9938),d=s(6831),m=s(6947),p=s(734),x=s(8998);let{Wrapper:f}=c.Input,AssistantConfig=e=>{let{assistant:t,save:s,remove:i}=e,[a,l]=(0,o.useState)(t),onChange=e=>{let{name:t,value:s}=e.target;l({...a,[t]:s})},onNumberChange=(e,t)=>{""!==e&&l({...a,[t]:e})};return(0,n.jsx)("div",{className:"w-full flex justify-center",children:(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s(a)},className:"w-full flex flex-col gap-4",children:[(0,n.jsx)(f,{label:"名称",description:"助理名称",children:(0,n.jsx)(c.Input,{type:"text",variant:"filled",value:a.name,name:"name",onChange:onChange})}),(0,n.jsx)(f,{label:"指令",description:"为角色分配的系统指令",children:(0,n.jsx)(u.g,{variant:"filled",className:"w-full",name:"prompt",value:a.prompt,onChange:onChange,autosize:!0})}),(0,n.jsx)(f,{label:"创意度",variant:"filled",description:"回复的创意度，数值越大，创意度越高",children:(0,n.jsx)(d.Y,{type:"number",variant:"filled",precision:1,max:2,min:0,step:.1,value:a.temperature,name:"temperature",onChange:e=>onNumberChange(e,"temperature")})}),(0,n.jsx)(f,{label:"上下文数",description:"每次对话记忆的历史对话次数",children:(0,n.jsx)(d.Y,{type:"number",variant:"filled",max:8,min:0,step:1,value:a.max_log,name:"max_log",onChange:e=>onNumberChange(e,"max_log")})}),(0,n.jsx)(f,{label:"回复长度",description:"回复内容的长度限制",children:(0,n.jsx)(d.Y,{type:"number",variant:"filled",max:2e3,min:50,step:50,value:a.max_tokens,name:"max_tokens",onChange:e=>onNumberChange(e,"max_tokens")})}),(0,n.jsxs)("div",{className:"flex justify-around mt-4",children:[(0,n.jsx)(m.z,{type:"submit",leftIcon:(0,n.jsx)(p.Z,{size:"1.2rem"}),children:"Save"}),a.id?(0,n.jsx)(m.z,{color:"red",variant:"light",leftIcon:(0,n.jsx)(x.Z,{size:"1.2rem"}),onClick:()=>i(a.id),children:"Remove"}):null]})]})})};var h=s(429),g=s.n(h),j=s(8224),v=s(4006),_=s(8999),w=s(2225),N=s(547),C=s(9573),y=s(8936),b=s(219),A=s(5224);let showNotification=e=>{r.N9.show({id:"Success",title:"Success",message:e,autoClose:3e3})};var assistant=()=>{let[e,t]=(0,o.useState)([]),[s,r]=(0,l.q)(!1),[c,u]=(0,o.useState)();(0,o.useEffect)(()=>{let e=i.Z.getList();t(e)},[]);let onEditAssistant=e=>{u(e),r.open()},onAddAssistant=()=>{let t={...a.pl[0],name:"助理_".concat(e.length+1," 号")};u(t),r.open()};return(0,n.jsxs)("div",{className:"h-screen flex flex-col",children:[(0,n.jsxs)("div",{className:"flex justify-between p-4 shadow-sm",children:[(0,n.jsx)(g(),{href:"/",children:(0,n.jsx)(j.A,{children:(0,n.jsx)(y.Z,{})})}),(0,n.jsx)(v.x,{weight:500,size:"lg",children:"助理"}),(0,n.jsx)(j.A,{onClick:()=>onAddAssistant(),children:(0,n.jsx)(b.Z,{})})]}),(0,n.jsx)("div",{className:"flex gap-8 flex-wrap p-4 overflow-y-auto",children:e.map(e=>(0,n.jsxs)(_.Z,{shadow:"sm",padding:"lg",radius:"md",className:"w-full max-w-sm group transition-all duration-300",children:[(0,n.jsx)(v.x,{weight:500,className:"line-clamp-1",children:e.name}),(0,n.jsx)(v.x,{size:"sm",color:"dimmed",className:"line-clamp-3 mt-2",children:e.prompt}),(0,n.jsxs)(w.Z,{className:"mt-4 flex items-center",children:[(0,n.jsxs)(w.Z,{children:[(0,n.jsxs)(N.C,{size:"md",color:"green",radius:"sm",children:["TOKEN: ",e.max_tokens]}),(0,n.jsxs)(N.C,{size:"md",color:"blue",radius:"sm",children:["TEMP: ",e.temperature]})," ",(0,n.jsxs)(N.C,{size:"md",color:"cyan",radius:"sm",children:["LOGS: ",e.max_log]})]}),(0,n.jsx)(w.Z,{className:"w-full flex justify-end items-center opacity-0 transition-all duration-300 group-hover:opacity-100",children:(0,n.jsx)(j.A,{size:"sm",onClick:()=>onEditAssistant(e),children:(0,n.jsx)(A.Z,{})})})]})]},e.id))}),(0,n.jsx)(C.d,{opened:s,onClose:r.close,size:"lg",position:"right",children:(0,n.jsx)(AssistantConfig,{assistant:c,save:e=>{if(e.id)t(i.Z.updateAssistant(e.id,e));else{let s={...e,id:Date.now().toString()};t(i.Z.addAssistant(s))}showNotification("保存成功"),r.close()},remove:e=>{t(i.Z.removeAssistant(e)),showNotification("移除成功"),r.close()}})})]})}},5583:function(e,t,s){"use strict";var n=s(6666),i=s(8575);let getList=()=>{let e=(0,n.tv)(i.zR)||[];return i.pl.concat(e)},updateList=e=>{(0,n.co)(i.zR,e.filter(e=>!e.system))};t.Z={getList,addAssistant:e=>{let t=getList();return t.push(e),updateList(t),t},updateAssistant:(e,t)=>{let s=getList(),n=s.findIndex(t=>t.id===e);return n>-1&&(s[n]={...s[n],...t},updateList(s)),s},removeAssistant:e=>{let t=getList(),s=t.filter(t=>t.id!==e);return updateList(s),s},getAssistant:e=>{let t=getList();return t.find(t=>t.id===e)||null}}},8575:function(e,t,s){"use strict";s.d(t,{W$:function(){return r},bH:function(){return a},pl:function(){return l},zR:function(){return i},zo:function(){return n}});let n="ai_assistant_session",i="ai_assistant_assistant",a="ai_assistant_api_key",l=[{name:"英语 助手",prompt:"Please be my English teacher, if I made any mistakes in words, tense, or grammar in our conversation, please correct me and give me an proper sample sentence, if I use chinese, please translate it,thanks",temperature:.7,max_log:4,max_tokens:800,id:"1",system:!0},{name:"编程 助手",prompt:"你是一个编程助手，任务是详细地回答用户的每个编程问题",temperature:.7,max_log:10,max_tokens:2e3,id:"2",system:!0}],r={user:"\uD83D\uDC68‍\uD83D\uDCBB‍",assistant:"\uD83E\uDD16",system:"\uD83D\uDD78"}},6666:function(e,t,s){"use strict";function setLocal(e,t){window.localStorage.setItem(e,JSON.stringify(t))}function getLocal(e){let t=window.localStorage.getItem(e);return t?JSON.parse(t):null}s.d(t,{co:function(){return setLocal},tv:function(){return getLocal}})}},function(e){e.O(0,[65,243,774,888,179],function(){return e(e.s=9792)}),_N_E=e.O()}]);